<!-- src/app/profile-view/profile-view.component.html -->

 <div class="user-info">
          <mat-card class="user-card">
          <img mat-card-image width="300" height="300" src="https://placehold.co/300x300/pink/white?text=cineData+User">
          <mat-card-header class="profile-card-header">
              <mat-card-title >{{user.username}}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
              <p>Email: {{user.email}}</p>
              <p>Birthday: {{user.birthdate | date: 'longDate' }}</p>
          </mat-card-content>
          <mat-card-actions>
              <button mat-raised-button color="primary" (click)="openUpdateUserDialog()">Update</button>
              <button mat-raised-button color="warn" (click)="deleteUser()">Delete</button>
          </mat-card-actions>
      </mat-card>
 </div>
  <h1>Here are your Favorite Movies</h1>
  <div style="box-sizing: border-box; display: grid; gap: 1rem; grid-template-columns: repeat(auto-fill, minmax(17rem, 1fr)); padding: 5ch 5ch;">
        @for(movie of favoriteMovies; track movie._id; let idx=$index ) {
      <mat-card style="flex: 1 1; padding: 5px 5px; align-items: center; width: 300px; height: auto;" appearance="raised" >
          <mat-card-title-group style="display: block;">
          <mat-card-title style="text-align: center;">@if(movie.title[21]){ {{ movie.title.slice(0,20).concat('...') | uppercase}} } @else{ {{ movie.title | uppercase }} }</mat-card-title>
          <mat-card-subtitle>{{movie.releaseDate}}</mat-card-subtitle>
          </mat-card-title-group>
          <img mat-card-image src="{{movie.imagePath}}" alt="{{movie.title}}" loading="lazy"/>
          <mat-card-actions mat-ripple [matRippleRadius]="45" [matRippleUnbounded]="true" style="gap: 2px;">
              <button
                  mat-raised-button
                  color="primary"
                  (click)="getGenre(movie)"
              >
                  Genre
              </button>
              <button
                  mat-raised-button
                  color="primary"
                  (click)="getDirector(movie)"
              >
                  Director
              </button>
              <button
                  mat-raised-button
                  color="primary"
                  (click)="getSynopsis(movie)"
              >
                  Synopsis
              </button>
              <mat-icon style="cursor: pointer; color: red;" (click)="toggleFavoriteMovie(movie)">@if(isFavoriteMovie(movie)){ {{fav}} } @else{ {{notFav}} }</mat-icon>
          </mat-card-actions>
      </mat-card>}
      @empty {
          <div class="loading">
              <mat-progress-bar mode="buffer"></mat-progress-bar>

          <h1 class="loading_message">Movies are still loading. <b>Thank you</b> for your patience.</h1>
             <mat-progress-bar mode="buffer"></mat-progress-bar>
         </div>
          }
  </div>
