<!-- src/app/profile-view/profile-view.component.html -->
<app-nav-bar></app-nav-bar>
 <div class="user-info">
  <mat-card appearance="raised" class="orientation mat-elevation-z3">
    <mat-card-header>
    <mat-card-title>Profile Page and Basic Orientation</mat-card-title>
    </mat-card-header>
  <mat-card-content>
    <p>Hello, {{user.username | titlecase }}!</p>
    <p>Welcome to CineDataDB...an app for learning about the best films.</p>
    <p>On the main page, click the heart to add a movie to your favorites.</p>
    <p>Here you can view and update your information. Or delete your account.</p>
    <p>Click on the "Update" button to change your username, password, email, or birthdate.</p>
    <p>Click on the "Delete" button to remove your account from the database.</p>
    <p>Scroll down to see your set of favorite films!</p>
  </mat-card-content>
  </mat-card>
          <mat-card appearance="raised" class="user-card mat-elevation-z5">
          <img mat-card-image width="300" height="300" src="https://placehold.co/300x300/pink/white?text={{user.username | uppercase }}">
          <!-- <mat-card-header class="profile-card-header">
              <mat-card-title>Hello, {{user.username | titlecase }}!</mat-card-title>
          </mat-card-header> -->
          <mat-card-content>
              <p><b>Email:</b></p> <p> {{user.email}}</p>
              <p><b>Birthday:</b></p> <p>{{user.birthdate | date: 'longDate' }}</p>
          </mat-card-content>
          <mat-card-actions class="buttons">
              <button mat-raised-button color="primary" (click)="openUpdateUserDialog()">Update</button>
              <button mat-raised-button color="warn" (click)="deleteUser()">Delete</button>
          </mat-card-actions>
      </mat-card>

 </div>
  <h1>Here are your Favorite Movies</h1>
  <div class="fav-movies">
        @for(movie of favoriteMovies; track movie._id; let idx=$index ) {
      <mat-card class="movie-card mat-elevation-z8" appearance="raised" >
          <mat-card-title-group style="display: block;">
          <mat-card-title class="movie-title" style="text-align: center;"> @if(movie.title[20]){ {{ movie.title.slice(0,19).concat('...') | uppercase}} } @else{ {{ movie.title | uppercase }} } </mat-card-title>
          <mat-card-subtitle style="margin-left: 10px;">{{movie.releaseDate}}</mat-card-subtitle>
          </mat-card-title-group>
          <img mat-card-image src="{{movie.imagePath}}" alt="{{movie.title}}" loading="lazy"/>
          <mat-card-actions mat-ripple [matRippleRadius]="45" [matRippleUnbounded]="true" style="gap: 2px;">
              <button
                  mat-raised-button
                  color="primary"
                  (click)="getGenre(movie)"
              >
                  Genre
              </button>
              <button
                  mat-raised-button
                  color="primary"
                  (click)="getDirector(movie)"
              >
                  Director
              </button>
              <button
                  mat-raised-button
                  color="primary"
                  (click)="getSynopsis(movie)"
              >
                  Synopsis
              </button>
              <mat-icon style="cursor: pointer; color: red;" (click)="toggleFavoriteMovie(movie)">@if(isFavoriteMovie(movie)){ {{fav}} } @else{ {{notFav}} }</mat-icon>
          </mat-card-actions>
      </mat-card>}
      @empty {
          <div class="loading">
          <h1 class="loading_message">You haven't added any favorite movies yet.</h1>

         </div>
          }
  </div>
